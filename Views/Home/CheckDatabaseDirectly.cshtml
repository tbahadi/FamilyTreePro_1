@{
    ViewData["Title"] = "فحص قاعدة البيانات مباشرة";
}

<div class="container mt-4" dir="rtl">
    <h2 class="text-center mb-4">فحص قاعدة البيانات مباشرة</h2>

    <div class="row">
        <div class="col-md-6">
            <h4>الشجرات (@ViewBag.Trees.Count)</h4>
            @if (ViewBag.Trees.Count > 0)
            {
                @foreach (var tree in ViewBag.Trees)
                {
                    <div class="card mb-2">
                        <div class="card-body">
                            <h5>@tree.Name</h5>
                            <p><strong>الرقم:</strong> @tree.Id</p>
                            <p><strong>الوصف:</strong> @tree.Description</p>
                            <p><strong>المستخدم:</strong> @tree.UserId</p>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="alert alert-warning">لا توجد شجرات</div>
            }
        </div>

        <div class="col-md-6">
            <h4>الأفراد (@ViewBag.Persons.Count)</h4>
            @if (ViewBag.Persons.Count > 0)
            {
                @foreach (var person in ViewBag.Persons)
                {
                    <div class="card mb-2">
                        <div class="card-body">
                            <h5>@person.FullName</h5>
                            <p><strong>الرقم:</strong> @person.Id</p>
                            <p><strong>الشجرة:</strong> @person.FamilyTreeId</p>
                            <p><strong>الجنس:</strong> @person.Gender</p>
                            <p><strong>تاريخ الإضافة:</strong> @person.CreatedDate.ToString("yyyy/MM/dd HH:mm")</p>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="alert alert-warning">لا توجد أفراد</div>
            }
        </div>
    </div>

    <div class="mt-4 text-center">
        <a href="@Url.Action("Index", "Home")" class="btn btn-secondary">العودة</a>
        <a href="@Url.Action("Create", "Person", new { familyTreeId = 1 })" class="btn btn-primary">إضافة فرد جديد</a>
    </div>
</div>